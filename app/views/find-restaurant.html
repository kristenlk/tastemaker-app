<div ng-switch="findRstCtrl.formPhase" class="main-body">

  <!-- Location detection -->
  <div ng-switch-when="1">
    <h3 class="location-detection">Detecting your location...</h3>
    <!-- Eventually put an animation here -->
  </div>

  <!-- Location verification / map -->
  <div ng-switch-when="2">
    <h3>Here's where we've detected your location:</h3>

    <div class="col-md-offset-2 map">
      <ui-gmap-google-map center='findRstCtrl.userLocationMap.center' zoom='findRstCtrl.userLocationMap.zoom'>
        <ui-gmap-markers
            models="findRstCtrl.userLocation"
            coords="'self'"
            >
        </ui-gmap-markers>
      </ui-gmap-google-map>
    </div>

    <button class="btn btn-default" ng-click="findRstCtrl.previousPhase()"><span class="glyphicon glyphicon-chevron-left"></span>&nbsp;Not where I am</button>
    <button class="btn btn-default" ng-click="findRstCtrl.nextPhase()">This is correct&nbsp;<span class="glyphicon glyphicon-chevron-right"></span></button>
  </div>

  <!-- Criteria selection -->
  <div ng-switch-when="3">

    <!-- Category dropdown -->
    <form class="criteria-selection">
      <span class="labels">Category: </span><br>
      <select id="category-dropdown" ng-model="findRstCtrl.category" ng-options="category.id as category.name for category in findRstCtrl.categories">
      </select>
      <br>

      <span class="labels">Distance: </span><br>
      <select id="distance-dropdown" ng-model="findRstCtrl.distance" ng-options="distance.id as distance.name for distance in findRstCtrl.distances">
      </select>
      <br>

      <span class="labels">Price range: </span><br>
      <select id="price-dropdown" ng-model="findRstCtrl.price" ng-options="price.id as price.name for price in findRstCtrl.prices">
      </select>
    </form>

    <button class="btn btn-default" ng-click="findRstCtrl.nextPhase(); findRstCtrl.getRestaurant()">Let's find your dinner.&nbsp;<span class="glyphicon glyphicon-chevron-right"></span></button>
  </div>

  <!-- Restaurant results -->
  <div ng-switch-when="4">
    <div ng-if="findRstCtrl.restaurants.length > 0 && findRstCtrl.restaurants[findRstCtrl.currentRestaurant]">
      <ul class="restaurant-result">

        <li>
          <a href="{{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].url }}">
            <h3>{{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].name }}</h3>
          </a>
        </li>

        <li>
          <span class="labels">Rating:</span> {{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].rating }}
        </li>

        <li ng-if="findRstCtrl.restaurants[findRstCtrl.currentRestaurant].location.display_address">
          <span class="labels">Address:</span><br>
          <span ng-repeat="address in findRstCtrl.restaurants[findRstCtrl.currentRestaurant].location.display_address">
            {{ address }}<br>
          </span>
        </li>

        <li ng-if="findRstCtrl.restaurants[findRstCtrl.currentRestaurant].display_phone">
          <span class="labels">Phone number:</span> {{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].display_phone }}
        </li>

        <li>
          <span class="labels">Price range:</span> {{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].price }}
        </li>

      </ul>

      <!-- Google Maps directions -->
      <!-- Using ng-show below causes gmap to be cut off, so using ng-if instead -->
      <div class="col-md-offset-2 map">
        <ui-gmap-google-map control="findRstCtrl.directionsMap.control" center="findRstCtrl.directionsMap.center" zoom="findRstCtrl.directionsMap.zoom">
        </ui-gmap-google-map>
      </div>

      <div class="rst-result-btns" ng-controller="navbarController as navCtrl">

        <button class="btn btn-default" ng-click="findRstCtrl.previousPhase()">
          <span class="glyphicon glyphicon-chevron-left"></span>
          Start over
        </button>

        <button class="btn btn-default" ng-show="findRstCtrl.currentRestaurant != 0" ng-click="findRstCtrl.previousRestaurant()">
          <span class="glyphicon glyphicon-chevron-left"></span>
          Previous restaurant
        </button>

        <button class="btn btn-default" ng-click="findRstCtrl.nextRestaurant()">
          I don't like this restaurant - give me the next best one.&nbsp;
          <span class="glyphicon glyphicon-chevron-right"></span>
        </button>

        <button class="btn btn-default" ng-if="navCtrl.isLoggedIn()" ng-click="findRstCtrl.saveToFavorites()">
          Add to favorites&nbsp;
          <span class="glyphicon glyphicon-heart"></span>
        </button>

        <p ng-if="!navCtrl.isLoggedIn()">
          To save restaurants to your favorites, <a href="#/login">log in</a> or <a href="#/signup">sign up</a>.
        </p>

      </div>
    </div>

    <div ng-if="findRstCtrl.restaurants.length > 0 && !findRstCtrl.restaurants[findRstCtrl.currentRestaurant]">
      <h4>There are no more restaurants that match your criteria. Please try searching again!</h4>

      <button class="btn btn-default" ng-click="findRstCtrl.previousPhase()">
        <span class="glyphicon glyphicon-chevron-left"></span>
        Start over
      </button>

    </div>

    <div ng-if="findRstCtrl.restaurants.data.length === 0">
      <h4>Your search didn't return any restaurants. Please try searching again!</h4>

      <button class="btn btn-default" ng-click="findRstCtrl.previousPhase()">
        <span class="glyphicon glyphicon-chevron-left"></span>
        Start over
      </button>

    </div>

  </div>
</div>
</div>
