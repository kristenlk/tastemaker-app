<div ng-switch="findRstCtrl.formPhase" class="row">
  <div class="col-md-8 col-md-offset-2">
    <div class="main-body find-rsts">

      <!-- Location detection -->
      <div ng-switch-when="1">
        <div class="outer-container">
          <div class="outer-body">
            <h3>Detecting your location...</h3>
            <!-- Eventually put an animation here -->
          </div>
        </div>
      </div>

      <!-- Location verification / map -->
      <div ng-switch-when="2" class="location-verification">
        <div class="outer-container">
          <div class="outer-body">
            <h3>Here's where we've detected your location:</h3>
              <ui-gmap-google-map center='findRstCtrl.userLocationMap.center' zoom='findRstCtrl.userLocationMap.zoom'>
                <ui-gmap-markers
                    models="findRstCtrl.userLocation"
                    coords="'self'"
                    >
                </ui-gmap-markers>
              </ui-gmap-google-map>
          </div>
        </div>

        <button class="button btn btn-default" ng-click="findRstCtrl.previousPhase()"><span class="glyphicon glyphicon-chevron-left"></span>&nbsp;Not where I am</button>
        <button class="button btn btn-default" ng-click="findRstCtrl.nextPhase()">This is correct&nbsp;<span class="glyphicon glyphicon-chevron-right"></span></button>
      </div>

      <!-- Criteria selection -->
      <div ng-switch-when="3" class="criteria">
        <div class="outer-container">
          <div class="outer-body">
            <h3>What are you looking for?</h3>
            <form class="criteria-selection">
              <br>
              <span class="labels">Category: </span><br>
              <select id="category-dropdown" ng-model="findRstCtrl.category" ng-options="category.id as category.name for category in findRstCtrl.categories" class="btn btn-default dropdown-toggle">
              </select>
              <br>

              <span class="labels">Distance: </span><br>
              <select id="distance-dropdown" ng-model="findRstCtrl.distance" ng-options="distance.id as distance.name for distance in findRstCtrl.distances" class="btn btn-default dropdown-toggle">
              </select>
              <br>

              <span class="labels">Price range: </span><br>
              <select id="price-dropdown" ng-model="findRstCtrl.price" ng-options="price.id as price.name for price in findRstCtrl.prices" class="btn btn-default dropdown-toggle">
              </select>
            </form>
            <br>

            <button class="button btn btn-default" ng-click="findRstCtrl.nextPhase(); findRstCtrl.getRestaurant()">This way to deliciousness&nbsp;<span class="glyphicon glyphicon-chevron-right"></span></button>
          </div>
        </div>
      </div>

      <!-- Restaurant results -->
      <div ng-switch-when="4">
        <div ng-if="findRstCtrl.restaurants.length > 0 && findRstCtrl.restaurants[findRstCtrl.currentRestaurant]" class="restaurant-results">
          <div class="outer-container">
            <div class="outer-body">
              <ul>

                <li>
                  <a href="{{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].url }}">
                    <h3>{{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].name }}</h3>
                  </a>
                </li>

                <li>
                  <span class="labels">Rating: </span> {{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].rating }} <span class="glyphicon glyphicon-star"></span>
                </li>

                <li ng-if="findRstCtrl.restaurants[findRstCtrl.currentRestaurant].location.display_address">
                  <span class="labels">Address: </span><br>
                  <span ng-repeat="address in findRstCtrl.restaurants[findRstCtrl.currentRestaurant].location.display_address">
                    {{ address }}
                  </span>
                </li>

                <li ng-if="findRstCtrl.restaurants[findRstCtrl.currentRestaurant].display_phone">
                  <span class="labels">Phone: </span> {{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].display_phone }}
                </li>

                <li>
                  <span class="labels">Price range: </span> {{ findRstCtrl.restaurants[findRstCtrl.currentRestaurant].price }}
                </li>

              </ul>

              <!-- Google Maps directions -->
              <ui-gmap-google-map control="findRstCtrl.directionsMap.control" center="findRstCtrl.directionsMap.center" zoom="findRstCtrl.directionsMap.zoom">
              </ui-gmap-google-map>

              <div class="rst-result-btns" ng-controller="navbarController as navCtrl">

                <a class="button btn btn-default" role="button" ng-show="findRstCtrl.currentRestaurant != 0" ng-click="findRstCtrl.previousRestaurant()">
                  <span class="glyphicon glyphicon-chevron-left"></span>
                  Previous
                </a>

                <a class="button btn btn-default" role="button" ng-click="findRstCtrl.nextRestaurant()">
                  Next
                  <span class="glyphicon glyphicon-chevron-right"></span>
                </a>

                <br>

                <a class="button btn btn-default" role="button" g-if="navCtrl.isLoggedIn() && !findRstCtrl.inFavorites(findRstCtrl.restaurants[findRstCtrl.currentRestaurant].id)" ng-click="findRstCtrl.saveToFavorites()">
                  Save to favorites
                  <span class="glyphicon glyphicon-heart-empty"></span>
                </a>

                <a href="#/account/favorites" class="button btn btn-default saved" role="button" ng-if="navCtrl.isLoggedIn() && findRstCtrl.inFavorites(findRstCtrl.restaurants[findRstCtrl.currentRestaurant].id)"><span>Saved </span><span class="glyphicon glyphicon-heart"></span></a>

                <button class="button btn btn-default" ng-click="findRstCtrl.previousPhase()">
                  New search
                </button>
                <br>
                <p ng-if="!navCtrl.isLoggedIn()">
                  To save restaurants to your favorites, <a href="#/login">log in</a> or <a href="#/signup">sign up</a>.
                </p>

              </div>
            </div>
          </div>
        </div>


        <div ng-if="!findRstCtrl.restaurants[findRstCtrl.currentRestaurant]" class="no-results">
          <div class="outer-container">
            <div class="outer-body">
              <div ng-if="findRstCtrl.restaurants.length > 0 && !findRstCtrl.restaurants[findRstCtrl.currentRestaurant]">
                <h4>There are no more restaurants that match your criteria. Please try searching again!</h4>
                <br>
                <button class="button btn btn-default" ng-show="findRstCtrl.currentRestaurant != 0" ng-click="findRstCtrl.previousRestaurant()">
                  <span class="glyphicon glyphicon-chevron-left"></span>
                  Previous
                </button>

                <button class="button btn btn-default" ng-click="findRstCtrl.previousPhase()">
                  <!-- <span class="glyphicon glyphicon-chevron-left"></span> -->
                  New search
                </button>

              </div>

              <div ng-if="findRstCtrl.restaurants.data.length === 0">
                <h4>Your search didn't return any restaurants. Please try searching again!</h4>
                <br>
                <button class="button btn btn-default" ng-click="findRstCtrl.previousPhase()">
                  <!-- <span class="glyphicon glyphicon-chevron-left"></span> -->
                  New search
                </button>

              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
